<!DOCTYPE html>

<html lang="en" class="js">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />

	<title>Drag and Drop File Uploading</title>

	<script type="text/javascript" src="vendor/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="vendor/webuploader/webuploader.js"></script>
		
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/bootstrap.min.css">	
	<link rel="stylesheet" type="text/css" href="vendor/webuploader/webuploader.css">
	<link rel="stylesheet" type="text/css" href="styles/uploader.css">
</head>

<body>
	<div class="container" role="main">
		<form method="post" id="upload-box" action="#" enctype="multipart/form-data" novalidate class="box">

			<div id="initial-scale" class="box__input">

				<center>

					<img src="styles/svg/cloud-upload.svg" style="width: 128px; height: 128px;" />

					<input type="file" name="files[]" id="file" class="box__file" data-multiple-caption="{count} files selected" multiple />

					<div>
						<p>
							<label for="file">
								<strong>Choose a file</strong>
								<span class="box__dragndrop"> or drag it here</span>.
							</label>
						</p>

						<div id="progressBar"></div>
						<br />

						<!-- 在onclick事件之中设置上传接受的url地址 -->
						<!-- 这个按钮只能够进行文件的选择，如果是文件夹的选择，则需要通过拖拽的方式来完成 -->

						<div>
							<a id="controlButton" href="#" class="progress-button" onclick="upload('/test/index.php')">
								<img src="styles/svg/arrow-up.svg" style="width:24px; height:24px;" /> &nbsp;Upload
							</a>
						</div>

						<br />

						<div id="warning"></div>

					</div>

				</center>

			</div>

			<div id="progress-scale">
				<div id="uploader" class="wu-example">
					<input type="text" style="display:none" value="{$project_id}" name="project_id" id="{$project_id}" />
					<input type="text" style="display:none" value="{$filefolder_id}" name="filefolder_id" id="{$filefolder_id}" />
					<input type="text" style="display:none" value="{$filefolder_name}" name="filefolder_name" id="{$filefolder_name}" />
					<!--用来存放文件信息-->
					<div class="btns" style="margin-bottom: 20px;margin-top: 10px;">
						<div id="picker" style="display: inline-block;">选择文件</div>
						<button id="ctlBtn" class="btn btn-default" style="display: inline-block;margin-top:-30px;width:86px;height: 40px;">开始上传</button>
					</div>
					<div id="thelist" class="uploader-list">
						<div class="title" style="display: inline-block;text-align: center;width: 200px;border: 1px solid #ddd;height: 40px;line-height: 40px;border-right: none;margin-right: -4px;font-size: 14px;color: #666;font-weight: bolder;">文件名称</div>
						<div class="state" style="display: inline-block;text-align: center;width: 100px;border: 1px solid #ddd;height: 40px;line-height: 40px;border-right: none;margin-right: -4px;font-size: 14px;color: #666;font-weight: bolder;">文件大小</div>
						<div class="state" style="display: inline-block;text-align: center;width: 400px;border: 1px solid #ddd;height: 40px;line-height: 40px;margin-right: -4px;font-size: 14px;color: #666;font-weight: bolder;">上传进度</div>
					</div>
				</div>
			</div>

			<!-- 修改下面的三个函数来处理上传所相对应的事件 -->
			<script type="text/javascript">
				// 上传成功响应
				function uploadComplete(evt) {
					// 服务断接收完文件返回的结果
					// alert(evt.target.responseText);
					console.log($.parseJSON(evt.target.responseText));
				}

				// 上传失败
				function uploadFailed(evt) {

				}
				// 取消上传
				function cancleUploadFile() {
					xhr.abort();
				}
			</script>

			<script type="text/javascript">

				// UI处理相关代码

				// 在系统初始结果没有选择任何文件，显示最初始的对象拖拽接收区域
				$("#initial-scale").show();
				$("#progress-scale").hide();

				function objectDrop() {

				}

			</script>
		</form>
	</div>

	<script src="js/ts/uploader/bin/uploader.js" type="text/javascript"></script>
	<script src="js/traverseFileTreePromise.js" type="text/javascript"></script>
	<script src="js/uploader.js" type="text/javascript"></script>	
	<script src="js/script.js" type="text/javascript"></script>
</body>

</html>
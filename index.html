<!DOCTYPE html>

<html lang="en" class="js">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">

	<title>Drag and Drop File Uploading</title>
	<link rel="stylesheet" href="./styles/uploader.css">
</head>

<body>
	<div class="container" role="main">
		<form method="post" id="upload-box" action="#" enctype="multipart/form-data" novalidate class="box">

			<div class="box__input">
				<svg data-prefix="fas" data-icon="cloud-upload" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-cloud-upload fa-w-20 fa-7x box__icon">
					<path fill="currentColor" d="M537.585 226.56C541.725 215.836 544 204.184 544 192c0-53.019-42.981-96-96-96-19.729 0-38.065 5.954-53.316 16.159C367.042 64.248 315.288 32 256 32c-88.365 0-160 71.634-160 160 0 2.728.07 5.439.204 8.133C40.171 219.845 0 273.227 0 336c0 79.529 64.471 144 144 144h368c70.692 0 128-57.308 128-128 0-61.93-43.983-113.586-102.415-125.44zm-139.928 63.783l-10.775 10.775c-9.58 9.581-25.187 9.337-34.464-.539L320 266.067V392c0 13.255-10.745 24-24 24h-16c-13.255 0-24-10.745-24-24V266.067l-32.419 34.512c-9.276 9.875-24.883 10.119-34.464.539l-10.775-10.775c-9.373-9.373-9.372-24.568 0-33.941l92.686-92.686c9.373-9.373 24.568-9.373 33.941 0l92.687 92.686c9.374 9.372 9.374 24.568.001 33.941z"
					 class=""></path>
				</svg>
				<input type="file" name="files[]" id="file" class="box__file" data-multiple-caption="{count} files selected" multiple />

				<div style="position:relative; margin-left:auto;margin-right:auto;left: 32%;">
					<p>
						<label for="file">
							<strong>Choose a file</strong>
							<span class="box__dragndrop"> or drag it here</span>.
						</label>
					</p>
					<div id="progressBar"></div>
					<br />
					<!-- 在onclick事件之中设置上传接受的url地址 -->
					<a id="controlButton" href="#" class="progress-button" onclick="upload('/test/index.php')">
						<svg data-prefix="fas" data-icon="arrow-up" role="img" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 448 512"
						 class="svg-inline--fa fa-arrow-up fa-w-14 fa-7x">
							<path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"
							 class=""></path>
						</svg>&nbsp;Upload
					</a>

					<div id="warning" style="margin-left: -45px;"></div>
				</div>
			</div>

			<!-- 修改下面的三个函数来处理上传所相对应的事件 -->			
			<script type="text/javascript">
				// 上传成功响应
				function uploadComplete(evt) {
					// 服务断接收完文件返回的结果
					// alert(evt.target.responseText);
					console.log($.parseJSON(evt.target.responseText));		
				}

				// 上传失败
				function uploadFailed(evt) {

				}
				// 取消上传
				function cancleUploadFile() {
					xhr.abort();
				}
			</script>
		</form>
	</div>

	<script src="js/uploader.js" type="text/javascript"></script>
	<script src="js/jquery-3.2.1.min.js" type="text/javascript"></script>
	<script src="js/script.js" type="text/javascript"></script>
</body>

</html>